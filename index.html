<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Arma tu Combo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <style>
        body {
          font-family: 'Bebas Neue', sans-serif;
            text-align: center;
            /* background: url(https://go.rifarito.com/assets/images/background.png) #fff center center fixed; */
            background: #f5f5f5;
            background-size: cover;
            text-align: center;
            height: 100vh;
            color: #000;
            margin: 20px 0;
        }
        h1 {
          margin-bottom: 0;
        }
        h2 {
          margin-bottom: 0;
        }
        h3 {
          margin: 0;
        }
        p {
          margin: 0;
        }

        input#searchInput {
          border: 0;
          padding: 2px 0 0 10px;
          height: 30px;
          margin: -1px 0 2px 0;
          font-weight: 700;
          font-size: 18px;
          text-align: center;
          box-shadow: none;
          width: 169px;
          border-radius: 12px;
        }

        button#resetSearch {
          background: #fff;
          border: 0;
          padding: 8px 18px;
          font-weight: 900;
          border-radius: 15px;
          position: absolute;
          margin-top: -1px;
          margin-left: -19px;
          cursor: pointer;
      }
      button#resetSearch:hover {
        background: #000;
        color: #fff;
      }

        .gallery_container {
            display: flex;
            flex-wrap: wrap;
            gap: 2px;
            justify-content: center;
        }
        .gallery {
            display: flex;
            flex-wrap: wrap;
            gap: 2px;
            justify-content: center;
        }


        @media screen and (max-width: 768px) {
          .card {
            display: inline-block;
          }
          .gallery_container {
            display: inherit;
            flex-wrap: inherit;
          }
          .gallery {
            display: block;
            flex-wrap: inherit;
            gap: inherit;
            justify-content: inherit;
            overflow-x: scroll;
            white-space: nowrap;
            width: 100%;
            padding: 10px;
          }
        }


        .card {
          overflow: hidden;
          position: relative;
          opacity: .8;
          background: #fff;
          padding: 10px;
          margin: 5px;
          width: 210px;
          cursor: pointer;
          border: 1px solid #d7e6ee;
          border-radius: 25px;
          box-shadow: 0 0 18px #c6c6c669;
          transition: all 0.3s ease;
        }

        .card p {
          position: absolute;
          font-size: 1.6em;
          padding: 2px 8px;
          background: rgb(255 255 255 / 55%)
        }
        .card h3 {
          margin-top: -36px;
          text-align: left;
        }
        .card img {
          max-width: 100%;
          width: 220px;
          height: 200px;
        }

        .card:hover {
            opacity: 1;
            box-shadow: 0 0 18px #004a6e;
            transition: all 0.8s ease;
        }

        .selected-card {
            opacity: 0.5;

            position: relative;
        }

        .selected-gallery {
            margin-top: 20px;
        }

        .selected-gallery .selected-card {
            opacity: inherit;
            position: relative;
            display: inline-block;
            margin: 8px;
        }

        .selected-gallery .card:hover {
          box-shadow: 0 0 18px #52889069;
        }

        #total-price {
            font-weight: bold;
        }
        .containerprice {
          font-size: 2em;
          font-weight: 900;
        }
        .remove-button {
          position: absolute;
          top: 5px;
          right: 5px;
          background-color: #d80000;
          color: #fff;
          border: none;
          font-size: 1.5em;
          padding: 6px 12px;
          font-weight: 900;
          border-radius: 20px;
          cursor: pointer;
        }
        .remove-button:hover {
          background-color: #000;
        }
    </style>
    
</head>
<body>
  <div><h1>Arma tu Combo</h1> </div>
  <div><input type="text" id="searchInput" placeholder="Buscar..."> <button id="resetSearch" class="btn-reset-search" value="Reset">X</button> </div>
  
  <div class="gallery_container">
    <div class="gallery" id="gallery">
 
    </div>
  </div>


<div class="selected-gallery">
    <h2>SELECCIONADOS: <span id="total-count">0</span></h2>
    <p class="containerprice">Total: <span id="total-price">USD 0.00</span></p>
    <div id="selected-cards">
        <!-- Cards seleccionados aparecerán aquí -->
    </div>
    
</div>

<p>* Fotos referenciales</p>
<p>* Precios referenciales</p>

<script>

const motos = [
    {
      title: "Yamaha MT-09A-ABS",
      price: 15400,
      imageSrc: "./motos/mt09.jpg"
    },
    {
      title: "Yamaha YZF-R15 VER.4.0",
      price: 5100,
      imageSrc: "./motos/r15v4.jpg"
    },
    {
      title: "Suzuki GSX-S750",
      price: 14500,
      imageSrc: "./motos/GSXS750.jpg"
    },
    {
      title: "Suzuki Gixxer 250 SF",
      price: 6000,
      imageSrc: "./motos/Gixxer250sf.jpg"
    },
    {
      title: "Yamaha YZF-R7",
      price: 17000,
      imageSrc: "./motos/YZF-R7.jpg"
    },
    {
      title: "Yamaha FZS3.0",
      price: 3000,
      imageSrc: "./motos/FZS3.0.jpg"
    },
    {
      title: "Suzuki GSX-R150",
      price: 5000,
      imageSrc: "./motos/GSX-R150.jpg"
    },
    {
      title: "Yamaha MT-07",
      price: 11000,
      imageSrc: "./motos/MT-07.jpg"
    },
    {
      title: "Yamaha YZF-R3 ABS",
      price: 8000,
      imageSrc: "./motos/YZF-R3.jpg"
    },
    {
      title: "Yamaha MT-03",
      price: 8000,
      imageSrc: "./motos/MT-03.jpg"
    }
  ];

  const gallery = document.getElementById('gallery');
// document.addEventListener('DOMContentLoaded', function () {
  
      
  // motos.forEach(moto => {
  //   const card = document.createElement('div');
  //   let formattePrice = Intl.NumberFormat('es-PE', { style: 'currency', currency: 'USD' }).format(moto.price);
  //   card.classList.add('card');
  //   card.setAttribute('data-title', moto.title);
  //   card.setAttribute('data-price', moto.price);

  //   card.innerHTML = `
  //     <p>${formattePrice}</p>
  //     <img src="${moto.imageSrc}" alt="${moto.title}">
  //     <h3>${moto.title}</h3>
  //   `;
  //   gallery.appendChild(card);
  // });
// });

const searchInput = document.getElementById('searchInput');
const resetInput = document.getElementById('resetSearch');

resetInput.addEventListener('click', function (event) {
  searchInput.value = ""
  renderCards(motos);
})

function renderCards(filteredMotos) {
  // Limpia la galería antes de volver a renderizar
  gallery.innerHTML = '';

  // Recorre el array de motos y crea los cards
  filteredMotos.forEach(moto => {
    const card = document.createElement('div');
                card.classList.add('card');
                card.setAttribute('data-title', moto.title);
                card.setAttribute('data-price', moto.price);

                card.innerHTML = `
                    <p>USD ${moto.price}</p>
                    <img src="${moto.imageSrc}" alt="${moto.altText}">
                    <h3>${moto.title}</h3>
                `;

                // Agrega el card a la galería
                gallery.appendChild(card);    
  })
}

searchInput.addEventListener('input', function () {
            const searchTerm = searchInput.value.toLowerCase();

            // Filtra las motos según el término de búsqueda
            const filteredMotos = motos.filter(moto =>
                moto.title.toLowerCase().includes(searchTerm)
            );

            // Renderiza los cards filtrados
            renderCards(filteredMotos);
        });

        renderCards(motos);



  document.addEventListener('DOMContentLoaded', function () {
      const gallery = document.getElementById('gallery');
      const selectedCardsContainer = document.getElementById('selected-cards');
      const totalPriceElement = document.getElementById('total-price');
      const totalCountElement = document.getElementById('total-count');
      let totalPrice = 0;
      let totalCount = 0;

      gallery.addEventListener('click', function (event) {
          const card = event.target.closest('.card');

          if (card && !card.classList.contains('selected-card')) {
              const title = card.getAttribute('data-title');
              const price = parseFloat(card.getAttribute('data-price'));

              // Crear el nuevo card seleccionado
              const selectedCard = document.createElement('div');
              selectedCard.classList.add('card', 'selected-card');
              let formattePrice = Intl.NumberFormat('es-PE', { style: 'currency', currency: 'USD' }).format(price);
              selectedCard.innerHTML = `
                  <p>${formattePrice}</p>
                  <img src="${card.querySelector('img').src}" alt="${title}">
                  <h3>${title}</h3>
                  <button class="remove-button" onclick="removeSelectedCard(this, ${price})">X</button>
              `;

              // Agregar el card seleccionado al contenedor
              selectedCardsContainer.appendChild(selectedCard);

              // Actualizar el precio total
              totalPrice += price;
              totalCount++;
              let formatted = Intl.NumberFormat('es-PE', { style: 'currency', currency: 'USD' }).format(totalPrice.toFixed(2));
              totalPriceElement.textContent = formatted;
              totalCountElement.textContent = totalCount;

              // Deshabilitar el card en la galería
              // card.classList.add('selected-card');
          }
      });

      // Función para quitar un card seleccionado
      window.removeSelectedCard = function (button, price) {
          const selectedCard = button.closest('.selected-card');
          const title = selectedCard.querySelector('h3').textContent;

          // Remover el card seleccionado
          selectedCard.remove();

          // Actualizar el precio total
          totalPrice -= price;
          totalCount--;
          let formatted = Intl.NumberFormat('es-PE', { style: 'currency', currency: 'USD' }).format(totalPrice.toFixed(2));
          totalPriceElement.textContent = formatted;
          totalCountElement.textContent = totalCount;

          // Habilitar el card en la galería
          const galleryCard = gallery.querySelector(`.card[data-title="${title}"]`);
          // galleryCard.classList.remove('selected-card');
      };
  });
</script>

</body>
</html>